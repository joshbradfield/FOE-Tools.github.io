(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{381:function(e,_,r){"use strict";var t=r(21),n=r(382)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),t(t.P+t.F*o,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(109)("find")},382:function(e,_,r){var t=r(52),n=r(110),o=r(51),c=r(47),l=r(383);e.exports=function(e,_){var r=1==e,d=2==e,f=3==e,E=4==e,h=6==e,m=5==e||h,y=_||l;return function(_,l,v){for(var O,P,D=o(_),M=n(D),I=t(l,v,3),A=c(M.length),k=0,w=r?y(_,A):d?y(_,0):void 0;A>k;k++)if((m||k in M)&&(P=I(O=M[k],k,D),e))if(r)w[k]=P;else if(P)switch(e){case 3:return!0;case 5:return O;case 6:return k;case 2:w.push(O)}else if(E)return!1;return h?-1:f||E?E:w}}},383:function(e,_,r){var t=r(384);e.exports=function(e,_){return new(t(e))(_)}},384:function(e,_,r){var t=r(28),n=r(294),o=r(13)("species");e.exports=function(e){var _;return n(e)&&("function"!=typeof(_=e.constructor)||_!==Array&&!n(_.prototype)||(_=void 0),t(_)&&null===(_=_[o])&&(_=void 0)),void 0===_?Array:_}},411:function(e,_,r){"use strict";r(89);var t={props:{sitekey:{type:String,required:!0},badge:{type:String,required:!1,default:"bottomright"},theme:{type:String,required:!1,default:"dark"},validate:{type:Function,required:!1},callback:{type:Function,required:!0},disabled:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1},reference:{type:String,required:!1},type:{type:String,required:!1,default:"submit"}},data:function(){return{widgetId:!1,loaded:!1}},methods:{render:function(){var e=this;this.widgetId=grecaptcha.render(this.recaptchaId,{sitekey:this.sitekey,size:"invisible",badge:this.badge,theme:this.theme,callback:function(_){e.callback(_),grecaptcha.reset(e.widgetId)}}),this.loaded=!0},renderWait:function(){var e=this;setTimeout((function(){"undefined"!=typeof grecaptcha&&grecaptcha.render?e.render():e.renderWait()}),200)},click:function(){(!this.validate||this.validate&&!1!==this.validate())&&grecaptcha.execute()}},computed:{computedClass:function(){var e=this.class?this.class.split(" "):[];return this.value&&e.push("invisible-recaptcha"),e},recaptchaId:function(){return"vue-invisible-recaptcha-"+this._uid}},mounted:function(){if("undefined"==typeof grecaptcha){var script=document.createElement("script");script.src="https://www.google.com/recaptcha/api.js?render=explicit",script.onload=this.renderWait,document.head.appendChild(script)}else this.render()}},n=r(14),component=Object(n.a)(t,(function(){var e=this,_=e.$createElement,r=e._self._c||_;return r("button",{ref:e.reference,class:e.computedClass,attrs:{id:e.id,type:e.type,disabled:!e.loaded||e.disabled},on:{click:function(_){return _.preventDefault(),e.click(_)}}},[r("div",{attrs:{id:e.recaptchaId,"data-size":"invisible"}}),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);_.a=component.exports},830:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(50),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(37),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(26),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(27),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(381),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(60),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_11__),vue_invisible_recaptcha__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(411),_scripts_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3);function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var i=0,_=function(){};return{s:_,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,t,n=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return n=e.done,e},e:function(e){o=!0,t=e},f:function(){try{n||null==r.return||r.return()}finally{if(o)throw t}}}}function _unsupportedIterableToArray(e,_){if(e){if("string"==typeof e)return _arrayLikeToArray(e,_);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,_):void 0}}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var i=0,r=new Array(_);i<_;i++)r[i]=e[i];return r}var i18nPrefix="routes.survey.";__webpack_exports__.default={head:function(){return this.$store.set("hero",{title:i18nPrefix+"hero.title",subtitle:i18nPrefix+"hero.subtitle"}),{title:this.$t(i18nPrefix+"title")}},beforeRouteEnter:function(e,_,r){r((function(e){e.$store.get("survey")&&0!==e.$store.get("survey").length||e.$router.push({name:"index"})}))},data:function(){return this.$store.commit("RESTORE_HERO"),{i18nPrefix:i18nPrefix,result:{},errors:{},loading:!1}},computed:{survey:function(){var e,_={survey:this.$store.get("survey")&&this.$store.get("survey").length?this.$store.get("survey@[0].survey.questions"):[],result:{}},r=_createForOfIteratorHelper(_.survey);try{for(r.s();!(e=r.n()).done;){var t=e.value;if(this.$data.errors[t.name]=!1,"checkbox"===t.type)_.result[t.name]=[];else if("matrix"===t.type){_.result[t.name]={};var n,o=_createForOfIteratorHelper(t.rows);try{for(o.s();!(n=o.n()).done;){var c=n.value;_.result[t.name][c.value]=null}}catch(e){o.e(e)}finally{o.f()}}else["html"].indexOf(t.type)<0&&(_.result[t.name]=null)}}catch(e){r.e(e)}finally{r.f()}return this.$data.result=_.result,_.survey},sitekey:function(){return"6Le0qqAUAAAAADcXlFuBa9hfCXfdUi53i85sWzSp"}},methods:{getSurveyLocal:function(e){return this.$store.get("locale")in e?e[this.$store.get("locale")]:e.default},getConstraint:function(e,_){return e.validators.filter((function(e){return _ in e})).map((function(e){return e[_]}))[0]},checkCondition:function checkCondition(question){var _this=this,r;if(!question.visibleIf)return!0;var simpleExpression=/{(\w+)}\s*=\s*('?\w+'?)/,containsExpression=/{(\w+)}\s*contains\s*"?'?(\w+)'?"?/,customExpression=/\{([^{]+)\}/g;return simpleExpression.test(question.visibleIf)?(r=simpleExpression.exec(question.visibleIf),eval("".concat(this.$data.result[r[1]],"===").concat(r[2]))):containsExpression.test(question.visibleIf)?(r=containsExpression.exec(question.visibleIf),this.$data.result[r[1]]&&this.$data.result[r[1]].indexOf(r[2])>=0):eval(question.visibleIf.replace(customExpression,(function(e,text){return _this.$data.result[text]?"'".concat(_this.$data.result[text].replace(/\n/gm,""),"'"):"''"})))},callback:function(e){var _=this;this.$axios.post("https://api.foe.tools/surveyresponses",{response:{response:this.$data.result,survey:this.$store.get("survey@[0].id")},captcha:e}).then((function(){_.$data.loading=!1,_.complete({message:_.$t(i18nPrefix+"survey_complete"),type:"is-success",indefinite:!0})})).catch((function(e){_.$data.loading=!1,400===e.response.status?_.$buefy.notification.open({message:_.$t(i18nPrefix+"error"),type:"is-danger",indefinite:!0}):_.$buefy.notification.open({message:_.$t(i18nPrefix+"unknown_error"),type:"is-danger",indefinite:!0}),console.error("error: ",e)}))},prepare:function(){var e=this,_=this.$refs.formSurvey.reportValidity();if(!_)return!1;var r,t=_createForOfIteratorHelper(this.survey);try{for(t.s();!(r=t.n()).done;){var n=r.value;this.$data.errors[n.name]=!1}}catch(e){t.e(e)}finally{t.f()}var o=function(r){var t=e.survey.find((function(e){return e.name===r}));if(e.$data.result[r]instanceof Array&&t.isRequired&&e.checkCondition(t)&&0===e.$data.result[r].length||e.survey.find((function(e){return e.name===r})).isRequired&&e.checkCondition(t)&&null===e.$data.result[r])e.$data.errors[r]=!0,_=!1;else if("object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_8__.a)(e.$data.result[r])&&t.isRequired&&e.checkCondition(t))for(var n in e.$data.result[r])if(null===e.$data.result[r][n]){e.$data.errors[r]=!0,_=!1;break}};for(var c in this.$data.result)o(c);return this.$forceUpdate(),!!_&&(this.$data.loading=!0,!0)},getErrorMessage:function(e){return e.isRequired&&this.$data.errors[e.name]?this.$t(i18nPrefix+"required_field"):""},complete:function(e){var _=this.$cookies.get("survey");_||(_=[]),_.push(this.$store.get("survey@[0].id")),this.$cookies.set("survey",_,{path:"/",expires:_scripts_utils__WEBPACK_IMPORTED_MODULE_13__.a.getDefaultCookieExpireTime()}),this.$buefy.notification.open(e),this.$router.push("/"),this.$store.dispatch("nuxtServerInit")}},components:{InvisibleRecaptcha:vue_invisible_recaptcha__WEBPACK_IMPORTED_MODULE_12__.a}}}}]);